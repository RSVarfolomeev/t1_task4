# ДЗ №4 Открытая школа разработчиков на JAVA 4 поток
Реализация аутентификации и авторизации с использованием Spring Security и JWT.

# Задание:
Создать базовое веб-приложение с использованием Spring Security и JWT для аутентификации и авторизации пользователей.

# Требования:
Настройка проекта:
Создайте новый проект Spring Boot.

Настройка конфигурации безопасности:
Настройте базовую конфигурацию Spring Security для вашего приложения.
Используйте JWT для аутентификации пользователей.
Создайте класс для генерации и проверки JWT токенов.

Реализация контроллеров:
Создайте контроллеры для аутентификации и регистрации пользователей.
Реализуйте методы для создания нового пользователя и генерации JWT токена при успешной аутентификации.
Реализуйте сохранение пользователей в базу данных PostgreSQL.
Добавьте поддержку ролей пользователей и настройте авторизацию на основе ролей.

Тестирование:
Напишите модульные тесты для контроллеров и сервисов.
Убедитесь, что аутентификация и авторизация работают корректно.
Проверьте, что только аутентифицированные пользователи имеют доступ к защищенным ресурсам.

Документация:
Добавьте краткую документацию к вашему API с использованием Swagger или OpenAPI.

Результат задания: Рабочее веб-приложение с базовой аутентификацией и авторизацией на основе Spring Security и JWT, сопровождаемое модульными тестами и краткой документацией к API.

# Реализация:
В приложении реализована проверка и генерация токенов JWT, сконфигурирована проверка доступа пользователя к ресурсам на основе токенов.
Для пользователя доступно две роли: **ROLE_USER**, **ROLE_ADMIN**. Создан контроллер для аутентификации и регистрации пользователей.


Таблица БД создается с помощью скрипта Liquibase:
```
src/main/resources/db/changelog/liquibase.xml
```

# REST API
Для взаимодействия с контроллерами и получения информации об имеющихся у них методов используется Swagger, который доступен по адресу:
```
http://server:port/swagger-ui/index.html#/
```
где:
- "server" - ip-адрес сервера, на котором развернуто приложение;
- "port" - порт, на котором доступно приложение.

Например при развертывании приложения и БД с помощью Docker будет следующий адрес:
```
http://127.0.0.1:18080/swagger-ui/index.html#/
```

# Запуск приложения для проверки
1. ОС Windows 10: приложение можно запустить вместе с СУБД Postgresql с помощью Docker. Для этого необходимо:
- Скачать архив с master-ветки репозитория проекта по следующему адресу:
```
https://github.com/RSVarfolomeev/t1_task4/archive/refs/heads/master.zip
```
- Из корневой папки проекта в командной строке выполнить команду для развертывания проекта:
```
docker-compose up
```
- После запуска проекта приложение будет доступно на порту 18080, СУБД Postgresql на порту 15432.

2. Linux (CentOS 7): такой же способ запуска проекта, как было описано выше, но для Linux на примере CentOS 7:
- По нижеуказанной инструкции развертываем Docker:
```
https://docs.docker.com/engine/install/centos/
```
- Создаем папку для клонирования проекта, клонируем master-ветку репозитория с проектом:
```
mkdir /opt/app
git clone https://github.com/RSVarfolomeev/t1_task4.git /opt/app
```
- Переходим в корневую папку проекта и развертываем проект с помощью docker compose:
```
cd /opt/app
docker compose up
```
- После запуска проекта приложение будет доступно на порту 18080, СУБД Postgresql на порту 15432.

---
#### Используемый стек технологий:

---

Java 17, Spring Boot, Spring Web, Spring Security, JWT, Spring Data Jpa, Postgresql, Liquibase, Swagger, Docker, Maven
